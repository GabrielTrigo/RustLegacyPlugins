       // @@@ ---  Creator SPooCK --- @@@   //
      //   @@@ --- Ban System --- @@@      //
     //   @@@ --- Version 1.2.0 --- @@@   //
    //  								 //
   // 		░░░░░███████ ]▄▄▄▄▄▄▄▄  	//
  //		▂▄▅█████████▅▄▃▂      	   //
 //		Il███████████████████].	  	  //
// 		 ◥⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙◤..  	 //
 

function On_Command(e,o,a){if("binv"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);e.Admin||null!=r?(e.Inventory.ClearArmor(),e.Inventory.AddItemTo("Invisible Helmet",36),e.Inventory.AddItemTo("Invisible Vest",37),e.Inventory.AddItemTo("Invisible Pants",38),e.Inventory.AddItemTo("Invisible Boots",39)):e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("bkev"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);e.Admin||null!=r?(e.Inventory.ClearArmor(),e.Inventory.AddItemTo("Kevlar Helmet",36),e.Inventory.AddItemTo("Kevlar Vest",37),e.Inventory.AddItemTo("Kevlar Pants",38),e.Inventory.AddItemTo("Kevlar Boots",39)):e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("brights"==o&&e.Admin){var n=a[0],s=CheckB(e,a),i=Plugin.GetIni("Access"),r=i.GetSetting("Admins With Access",s.SteamID);for(var m in Server.Players)s==m&&("give"==n&&null==r?(i.AddSetting("Admins With Access",s.SteamID,s.Name),i.Save(),e.MessageFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] now [color#00FF00]have access[/color] to BAN-System."),s.MessageFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] just [color#00FF00]grant you access[/color] to BAN-System.")):"give"==n&&null!=r?e.MessageFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] already [color#00FF00]have access[/color] to BAN-System."):"remove"==n&&null!=r?(i.DeleteSetting("Admins With Access",s.SteamID),i.Save(),e.MessageFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] now [color#FF0000]don't have access[/color] to BAN-System."),s.MessageFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] just [color#FF0000]removed your access[/color] to BAN-System.")):"give"!=n&&"remove"!=n&&e.MessageFrom("BAN-System","Use only commands [color#00FF00]give[/color] and [color#FF0000]remove[/color] !"))}if("bdoors"==o&&e.Admin){var n=a[0],s=CheckB(e,a),i=Plugin.GetIni("Access"),r=i.GetSetting("Admins Doors Access",s.SteamID);for(var m in Server.Players)s==m&&("give"==n&&null==r?(i.AddSetting("Admins Doors Access",s.SteamID,s.Name),i.Save(),e.MessageFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] now [color#00FF00]have access[/color] to All Doors"),s.MessageFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] just [color#00FF00]grant you access[/color] to All Doors.")):"give"==n&&null!=r?e.MessageFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] already [color#00FF00]have access[/color] to All Doors."):"remove"==n&&null!=r?(i.DeleteSetting("Admins Doors Access",s.SteamID),i.Save(),e.MessageFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] now [color#FF0000]don't have access[/color] to All Doors."),s.MessageFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] just [color#FF0000]removed your access[/color] to All Doors.")):"give"!=n&&"remove"!=n&&e.MessageFrom("BAN-System","Use only commands [color#00FF00]give[/color] and [color#FF0000]remove[/color] !"))}if("bcatch"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);e.Admin||null!=r?(e.MessageFrom("BAN-System","Searching and catching all ByPassers..."),BanCheckCallback()):e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("bshow"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);e.Admin||null!=r?(Data.AddTableValue("BanSystem",e.SteamID,!GetName(e)),e.Notice("Your name is now "+(GetName(e)?"VISIBLE in ban announce.":"INVISIBLE in ban announce."))):e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("brecalc"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);if(e.Admin||null!=r){var i=Plugin.GetIni("BanSystem"),l=60*System.DateTime.Now.ToString("HH")*60,c=60*System.DateTime.Now.ToString("mm"),S=System.DateTime.Now.ToString("ss"),F=parseInt(l)+parseInt(c)+parseInt(S),d=(System.DateTime.Now.ToString("M.dd"),0);for(var A in i.EnumSection("ID=Time")){var g=i.GetSetting("ID=Time",A);if(g>F&&g>12.31){var N=g-F,v=parseInt(N/86400);if(v>0){var D=CalcDays(v);i.AddSetting("ID=Time",A,D),i.Save()}}}for(var y in i.EnumSection("IP=Time")){var I=i.GetSetting("IP=Time",y);if(I>F&&I>12.31){var B=I-F,v=parseInt(B/86400);if(v>0){var D=CalcDays(v);i.AddSetting("IP=Time",y,D),i.Save(),d++}}}e.Notice("ReCalculated: "+d+" bans.")}else e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("bclean"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);e.Admin||null!=r?(e.Notice("INI: Cleaned from all expired bans."),Clean()):e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("mban"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);if(e.Admin||null!=r){var v=a[0],i=Plugin.GetIni("BanSystem"),u=Plugin.GetIni("BanSystemLog"),T=System.DateTime.Now.ToString("dd.M"),P=System.DateTime.Now.ToString("HH:mm");if(v.match(/[0-9]/g))if(60>=v){var s=CheckB(e,a);for(var m in Server.Players)if(s==m){var l=60*System.DateTime.Now.ToString("HH")*60,c=60*System.DateTime.Now.ToString("mm"),S=System.DateTime.Now.ToString("ss"),F=parseInt(l)+parseInt(c)+parseInt(S),f=parseInt(F)+60*v;u.AddSetting("Banned_PL_Info",s.SteamID,s.IP+" |NAME: "+s.Name+" |DATE: "+T+" |TIME: "+P+" |[ADMIN]: "+e.Name+" |FOR: "+v+" min."),u.Save(),i.AddSetting("ID=Time",s.SteamID,f),i.AddSetting("IP=Time",s.IP,f),i.Save(),GetName(e)?Server.BroadcastFrom("BAN-System","[color#FF0000][ADMIN] "+e.Name+" [/color]banned [color#00FF00]"+s.Name+"[/color] for [color#FF0000]"+v+" minute(s)."):Server.BroadcastFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+v+" minute(s)"),s.MessageFrom("BAN-System","[color#FF0000][ADMIN] "+e.Name+" banned you for "+v+" minutes."),s.Disconnect()}}else e.Notice("Max minutes are 60. Use Higher ban command for more time !");else e.Notice("Use only NUMBERS for time !")}else e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("hban"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);if(e.Admin||null!=r){var v=a[0],i=Plugin.GetIni("BanSystem"),u=Plugin.GetIni("BanSystemLog"),T=System.DateTime.Now.ToString("dd.M"),P=System.DateTime.Now.ToString("HH:mm");if(v.match(/[0-9]/g))if(24>=v){var s=CheckB(e,a);for(var m in Server.Players)if(s==m){var l=60*System.DateTime.Now.ToString("HH")*60,c=60*System.DateTime.Now.ToString("mm"),S=System.DateTime.Now.ToString("ss"),F=parseInt(l)+parseInt(c)+parseInt(S),f=parseInt(F)+3600*v;u.AddSetting("Banned_PL_Info",s.SteamID,s.IP+" |NAME: "+s.Name+" |DATE: "+T+" |TIME: "+P+" |[ADMIN]: "+e.Name+" |FOR: "+v+" hour(s)"),u.Save(),i.AddSetting("ID=Time",s.SteamID,f),i.AddSetting("IP=Time",s.IP,f),i.Save(),GetName(e)?Server.BroadcastFrom("BAN-System","[color#FF0000][ADMIN] "+e.Name+" [/color]banned [color#00FF00]"+s.Name+"[/color] for [color#FF0000]"+v+" hour(s)"):Server.BroadcastFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+v+" hour(s)"),s.MessageFrom("BAN-System","[color#FF0000][ADMIN] "+e.Name+" banned you for "+v+" hour(s)."),s.Disconnect()}}else e.Notice("Max hours are 24. Use Higher ban command for more time !");else e.Notice("Use only NUMBERS for time !")}else e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("dban"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);if(e.Admin||null!=r){var v=a[0],i=Plugin.GetIni("BanSystem"),u=Plugin.GetIni("BanSystemLog"),T=System.DateTime.Now.ToString("dd.M"),P=System.DateTime.Now.ToString("HH:mm");if(v.match(/[0-9]/g))if(30>=v){var s=CheckB(e,a);for(var m in Server.Players)if(s==m){var f=CalcDays(v);u.AddSetting("Banned_PL_Info",s.SteamID,s.IP+" |NAME: "+s.Name+" |DATE: "+T+" |TIME: "+P+" |[ADMIN]: "+e.Name+" |FOR: "+v+" day(s)"),u.Save(),i.AddSetting("ID=Time",s.SteamID,f),i.AddSetting("IP=Time",s.IP,f),i.Save(),GetName(e)?Server.BroadcastFrom("BAN-System","[color#FF0000][ADMIN] "+e.Name+" [/color]banned [color#00FF00]"+s.Name+"[/color] for [color#FF0000]"+v+" day(s)."):Server.BroadcastFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+v+" day(s)"),s.MessageFrom("BAN-System","[color#FF0000][ADMIN] "+e.Name+" banned you for "+v+" day(s)."),s.Disconnect()}}else e.Notice("Max days are 30.");else e.Notice("Use only NUMBERS for time !")}else e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("pban"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);if(e.Admin||null!=r){var i=Plugin.GetIni("BanSystem"),u=Plugin.GetIni("BanSystemLog"),T=System.DateTime.Now.ToString("dd.M"),P=System.DateTime.Now.ToString("HH:mm"),s=CheckV(e,a);for(var m in Server.Players)s==m&&(u.AddSetting("Banned_PL_Info",s.SteamID,s.IP+" |NAME: "+s.Name+" |DATE: "+T+" |TIME: "+P+" |[ADMIN]: "+e.Name+" |FOR: Permanent"),u.Save(),i.AddSetting("ID=Time",s.SteamID,"Permanent"),i.AddSetting("IP=Time",s.IP,"Permanent"),i.Save(),GetName(e)?Server.BroadcastFrom("BAN-System","[color#FF0000][ADMIN] "+e.Name+" [/color]banned [color#00FF00]"+s.Name+"[/color] [color#FF0000]Permanent"):Server.BroadcastFrom("BAN-System","[color#00FF00]"+s.Name+"[/color] has been [color#FF0000]BANNED[/color] [color#FF0000]Permanent"),s.MessageFrom("BAN-System","[color#FF0000][ADMIN] "+e.Name+" banned you Permanent !"),s.Disconnect())}else e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}if("vban"==o){var i=Plugin.GetIni("Settings"),M=i.GetSetting("VoteBan","BanTime"),E=i.GetSetting("VoteBan","TrueFalse"),b=6e4*i.GetSetting("VoteBan","Delay"),G=i.GetSetting("VoteBan","PercentNeed"),h=i.GetSetting("VoteBan","PlayersNeed"),d=Server.Players.Count,V=d*G;if("False"==E)return void e.MessageFrom("BAN-System","[color#00FF00]Vote Ban is currently disabled.");if(a.Length<=0)return void e.MessageFrom("BAN-System","[color#00FF00]Use /vban NAME to Vote Ban against someone.");if(Server.Players.Count<=parseInt(h)&&!e.Admin)return void e.MessageFrom("BAN-System","[color#00FF00]Must have at least[/color]"+h+"[color#00FF00]players online !");if(Plugin.GetTimer("VBTimer"))return void e.MessageFrom("BAN-System","[color#00FF00]A Vote is already in progress !");Data.AddTableValue("vban","target",null),Data.AddTableValue("vban","yes",0),Data.AddTableValue("vban","no",0);for(var R in Server.Players)Data.AddTableValue("vban_voted",R.SteamID,null);var v=Data.GetTableValue("vban_delay",e.SteamID);if(null!=v&&System.Environment.TickCount-v<b&&!e.Admin)return void e.MessageFrom("BAN-System","[color#00FF00]Please wait[/color] "+b/6e4+" [color#00FF00]minute(s) to vote again !");var s=CheckV(e,a);if(s.Admin&&!e.Admin)return void e.MessageFrom("BAN-System","[color#FF0000]YOU CAN'T VOTE AGAINST ADMIN !");for(var m in Server.Players)m==s&&(Data.AddTableValue("vban_delay",e.SteamID,System.Environment.TickCount),Data.AddTableValue("vban","target",s.SteamID),Data.AddTableValue("vban","targetIP",s.IP),Server.BroadcastFrom("BAN-System","[color#FF0000]------------------ VOTE "+M+" DAY(S) BAN -----------------"),Server.BroadcastFrom("BAN-System","[color#FF0000]"+e.Name+"[/color] has voted to BAN [color#00FF00]"+s.Name),Server.BroadcastFrom("BAN-System","Enter /yes to agree, or /no to disagree. You have 60 seconds to vote !"),Server.BroadcastFrom("BAN-System","[color#FF0000]-------------------[/color][color#00FF00]YES NEEDED:[/color] "+V+"[color#FF0000]---------------------[/color]"),Plugin.CreateTimer("VBTimer",6e4).Start(),DataStore.Add("BAN-System","VoteBan",s.Name))}if("yes"==o){var i=Plugin.GetIni("Settings"),E=i.GetSetting("VoteBan","TrueFalse"),p=Data.GetTableValue("vban","yes"),w=Data.GetTableValue("vban","no"),C=!0;if(null==Data.GetTableValue("vban","target"))return void e.MessageFrom("BAN-System","[color#00FF00]There is no vote running !");if(null!=Data.GetTableValue("vban_voted",e.SteamID))return void e.MessageFrom("BAN-System","[color#00FF00]You have already voted !");var d=Data.GetTableValue("vban",o);if(null==d?d=1:d++,Data.AddTableValue("vban",o,d),Data.AddTableValue("vban_voted",e.SteamID,!0),p>0)var p=p+1;else var p=0;if(w>0)var w=w+1;else var w=0;Server.BroadcastFrom("BAN-System","[color#FF0000]"+e.Name+"[/color] voted: [color#00FF00]"+o+"[/color] - [color#FF0000]|Y: "+p+"[/color] -|- [color#00FF00]"+w+" :N|[/color]")}if("no"==o){var i=Plugin.GetIni("Settings"),E=i.GetSetting("VoteBan","TrueFalse"),p=Data.GetTableValue("vban","yes"),w=Data.GetTableValue("vban","no");if(C=!1,null==Data.GetTableValue("vban","target"))return void e.MessageFrom("BAN-System","[color#00FF00]There is no vote running !");if(null!=Data.GetTableValue("vban_voted",e.SteamID))return void e.MessageFrom("BAN-System","[color#00FF00]You have already voted !");var d=Data.GetTableValue("vban",o);if(null==d?d=1:d++,Data.AddTableValue("vban",o,d),Data.AddTableValue("vban_voted",e.SteamID,!0),p>0)var p=p+1;else var p=0;if(w>0)var w=w+1;else var w=0;Server.BroadcastFrom("BAN-System","[color#FF0000]"+e.Name+"[/color] voted: [color#00FF00]"+o+"[/color] - [color#FF0000]|Y: "+p+"[/color] -|- [color#00FF00]"+w+" :N|[/color]")}if("vbreset"==o){var t=Plugin.GetIni("Access"),r=t.GetSetting("Admins With Access",e.SteamID);if(e.Admin||null!=r){Plugin.KillTimer("VBTimer"),Data.AddTableValue("vban","target",null),Data.AddTableValue("vban","yes",0),Data.AddTableValue("vban","no",0);for(var R in Server.Players)return Data.AddTableValue("vban_voted",R.SteamID,null),void e.MessageFrom("BAN-System","[color#00FF00]Voting has been reset")}else e.MessageFrom("BAN-System","You [color#FF0000]dont have access[/color] to that command !")}}function GetName(e){var o=Data.GetTableValue("BanSystem",e.SteamID);return null==o?!1:o}function On_DoorUse(e,o){var a=Plugin.GetIni("Access"),t=a.GetSetting("Admins Doors Access",e.SteamID);(e.Admin||null!=t)&&(o.Open=!0)}function On_PlayerKilled(e){var o=Plugin.GetIni("BanSystem"),a=Plugin.GetIni("BanSystemLog"),t=Plugin.GetIni("Settings"),r=t.GetSetting("RangeBan","RangeProt"),n=t.GetSetting("RangeBan","TrueFalse"),s=Math.round(e.DamageAmount);if("True"==n&&e.Attacker!=e.Victim&&null!=e.DamageType&&null!=e.Victim&&null!=e.Attacker&&!IsAnimal(e.Attacker.Name)&&!e.Attacker.Admin){var i=e.Attacker,m=e.WeaponName,l=Util.GetVectorsDistance(e.Attacker.Location,e.Victim.Location),c=Number(l).toFixed(2),S=t.GetSetting("RangeBan","Days"),F=CalcDays(S),d=System.DateTime.Now.ToString("dd.M"),A=System.DateTime.Now.ToString("HH:mm"),g=e.DamageType;"Bullet"==g?"M4"==m?c>RangeOf(m)&&RangeOf(m)>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: "+m+" |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect()):"MP5A4"==m?c>RangeOf(m)&&RangeOf(m)>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: "+m+" |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect()):"Bolt Action Rifle"==m?c>RangeOf(m)&&RangeOf(m)>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: "+m+" |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect()):"Shotgun"==m?c>RangeOf(m)&&RangeOf(m)>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: "+m+" |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect()):"P250"==m?c>RangeOf(m)&&RangeOf(m)>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: "+m+" |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect()):"9mm Pistol"==m?c>RangeOf(m)&&RangeOf(m)>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: "+m+" |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect()):"Revolver"==m?c>RangeOf(m)&&RangeOf(m)>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: "+m+" |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect()):"Pipe Shotgun"==m?c>RangeOf(m)&&RangeOf(m)>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: "+m+" |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect()):"HandCannon="==m&&c>RangeOf(m)&&RangeOf(m)>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: "+m+" |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect()):"Melee"==g&&void 0==m&&75==s&&c>RangeOf("Hunting Bow")&&RangeOf("Hunting Bow")>0&&r>c&&(a.AddSetting("RangeBan",i.SteamID,i.IP+" |NAME: "+i.Name+" |DATE: "+d+" |TIME: "+A+" |WEAPON: Hunting Bow |RANGE: "+l.toFixed(2)),a.Save(),o.AddSetting("ID=Time",i.SteamID,F),o.AddSetting("IP=Time",i.IP,F),o.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+i.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+S+" day(s)[/color] - [color#00FF00]MAX RANGE EXEEDED !"),i.MessageFrom("BAN-System","[color#FF0000]You exceeded the MAX RANGE ! Banned for "+S+" day(s)."),i.Disconnect())}}function RangeOf(e){var o=Plugin.GetIni("Settings"),a=o.GetSetting("RangeBan",e);return a}function IsAnimal(e){return"Wolf"==e||"Bear"==e||"MutantWolf"==e||"MutantBear"==e?!0:!1}function On_PlayerSpawned(e){var o=Plugin.GetIni("BanSystem"),a=Plugin.GetIni("BanSystemLog"),t=Plugin.GetIni("Settings"),r=o.GetSetting("ID=Time",e.SteamID),n=o.GetSetting("IP=Time",e.IP),s=60*System.DateTime.Now.ToString("HH")*60,i=60*System.DateTime.Now.ToString("mm"),m=System.DateTime.Now.ToString("ss"),l=parseInt(s)+parseInt(i)+parseInt(m),c=System.DateTime.Now.ToString("M.dd"),S=System.DateTime.Now.ToString("dd.M"),F=System.DateTime.Now.ToString("HH:mm"),d=t.GetSetting("ID-Changers","Punish-Days"),A=o.GetSetting("IP=Time",e.IP),g=parseFloat(A)+d/100,N=CalcDaysP(g);if(r>l&&r>12.31){var v=r-l,D=(parseInt(v/86400),parseInt(v/3600)),y=parseInt(v/60),I=y-60*D,B=v-60*y;D>0?(e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),e.MessageFrom("BAN-System","You are banned. Wait: [color#FF0000]"+D+" hour(s) "+I+" min."),e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] tried to join but he is banned for more [color#FF0000]"+D+" hour(s) "+I+" min."),e.Disconnect()):y>=0&&(e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),e.MessageFrom("BAN-System","You are banned. Wait: [color#FF0000]"+y+" min. "+B+" sec."),e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] tried to join but he is banned for more [color#FF0000]"+I+" min. "+B+" sec."),e.Disconnect())}else if(r>c&&12.31>=r){var u=100*(parseFloat(r)-parseFloat(c)),T=u.toFixed(0);if(1>T)var T=1;else if(T>31)var T=T-69;e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),e.MessageFrom("BAN-System","You are banned. Wait: [color#FF0000]"+T+" day(s)"),e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] tried to join but he is banned for more [color#FF0000]"+T+" day(s)"),e.Disconnect()}else if(n>c&&null==r&&12.31>=n&&"Permanent"!=n){var u=100*(parseFloat(n)-parseFloat(c)),T=u.toFixed(0);if(1>T)var T=1;else if(T>31)var T=T-69;var P=T+parseInt(d);o.AddSetting("ID=Time",e.SteamID,N),o.AddSetting("IP=Time",e.IP,N),o.Save(),a.AddSetting("ID_Changers",e.SteamID,e.IP+" |NAME: "+e.Name+" |DATE: "+S+" |TIME: "+F),a.Save(),e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),e.MessageFrom("BAN-System","Don't try to change your ID ! Ban increased: [color#FF0000]+"+P+" day(s) !"),e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] tried to change his ID. His ban time is increased: [color#FF0000]+"+P+" day(s) !"),e.Disconnect()}else"Permanent"==r||"Permanent"==n?(e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),e.MessageFrom("BAN-System","You are banned. [color#FF0000]Permanent !"),e.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] tried to join but he is banned [color#FF0000]Permanent !"),e.Disconnect()):(o.DeleteSetting("ID=Time",e.SteamID),o.DeleteSetting("IP=Time",e.IP),o.Save())}function BanCheckCallback(){var e=6e4*r.GetSetting("AutoDetector","Delay");Plugin.CreateTimer("BanCheck",e).Start();for(var o in Server.Players){var a=Plugin.GetIni("BanSystem"),t=Plugin.GetIni("BanSystemLog"),r=Plugin.GetIni("Settings"),n=a.GetSetting("ID=Time",o.SteamID),s=a.GetSetting("IP=Time",o.IP),i=60*System.DateTime.Now.ToString("HH")*60,m=60*System.DateTime.Now.ToString("mm"),l=System.DateTime.Now.ToString("ss"),c=parseInt(i)+parseInt(m)+parseInt(l),S=System.DateTime.Now.ToString("M.dd"),F=System.DateTime.Now.ToString("dd.M"),d=(System.DateTime.Now.ToString("HH:mm"),r.GetSetting("ID-Changers","Punish-Days")),A=a.GetSetting("IP=Time",o.IP),g=parseFloat(A)+d/100,N=CalcDaysP(g);if(n>c&&n>12.31){var v=n-c,D=(parseInt(v/86400),parseInt(v/3600)),y=parseInt(v/60),I=y-60*D,B=v-60*y;D>0?(o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),o.MessageFrom("BAN-System","Don't try BAN ByPass. Wait: [color#FF0000]"+D+" hour(s) "+I+" min."),o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+o.Name+"[/color] tried BAN ByPass. Kicked for more [color#FF0000]"+D+" hour(s) "+I+" min."),o.Disconnect()):y>=0&&(o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),o.MessageFrom("BAN-System","Don't try BAN ByPass. Wait: [color#FF0000]"+y+" min. "+B+" sec."),o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+o.Name+"[/color] tried BAN ByPass. Kicked for more [color#FF0000]"+y+" min. "+B+" sec."),o.Disconnect())}else if(n>S&&12.31>=n){var u=100*(parseFloat(n)-parseFloat(S)),T=u.toFixed(0);if(1>T)var T=1;else if(T>31)var T=T-69;o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),o.MessageFrom("BAN-System","Don't try BAN ByPass. Wait: [color#FF0000]"+T+" day(s)"),o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+o.Name+"[/color] tried BAN ByPass. Kicked for more [color#FF0000]"+T+" day(s)"),o.Disconnect()}else if(s>S&&null==n&&12.31>=s&&"Permanent"!=s){var u=100*(parseFloat(s)-parseFloat(S)),T=u.toFixed(0);if(1>T)var T=1;else if(T>31)var T=T-69;var P=T+parseInt(d);a.AddSetting("ID=Time",o.SteamID,N),a.AddSetting("IP=Time",o.IP,N),a.Save(),t.AddSetting("ID_Changers",o.SteamID,o.IP+" |NAME: "+o.Name+" |DATE: "+F+" |TIME: "+d),t.Save(),o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),o.MessageFrom("BAN-System","Don't try to change your ID ! Ban increased: [color#FF0000]+"+P+" day(s) !"),o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+o.Name+"[/color] tried to change his ID. His ban time is increased: [color#FF0000]+"+P+" day(s) !"),o.Disconnect()}else"Permanent"==n||"Permanent"==s?(o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),o.MessageFrom("BAN-System","You are banned. [color#FF0000]Permanent !"),o.MessageFrom("BAN-System","[color#FF0000]❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖❖"),Server.BroadcastFrom("BAN-System","[color#00FF00]"+o.Name+"[/color] tried BAN ByPass. But his ban is [color#FF0000]Permanent !"),o.Disconnect()):(a.DeleteSetting("ID=Time",o.SteamID),a.DeleteSetting("IP=Time",o.IP),a.Save())}}function On_PluginInit(){if(!Plugin.IniExists("BanSystem")){Plugin.CreateIni("BanSystem")}if(!Plugin.IniExists("BanSystemLog")){Plugin.CreateIni("BanSystemLog")}if(!Plugin.IniExists("Access")){Plugin.CreateIni("Access")}if(!Plugin.IniExists("Settings")){var e=Plugin.CreateIni("Settings");e.AddSetting("ID-Changers","Punish-Days",1),e.AddSetting("AutoDetector","TrueFlase","True"),e.AddSetting("AutoDetector","Delay",1),e.AddSetting("VoteBan","TrueFalse","True"),e.AddSetting("VoteBan","BanTime",1),e.AddSetting("VoteBan","EscapeTime",2),e.AddSetting("VoteBan","PercentNeed",.4),e.AddSetting("VoteBan","PlayersNeed",7),e.AddSetting("VoteBan","Delay",7),e.AddSetting("RangeBan","TrueFalse","True"),e.AddSetting("RangeBan","Days",7),e.AddSetting("RangeBan","RangeProt",800),e.AddSetting("RangeBan","HandCannon",30),e.AddSetting("RangeBan","Pipe Shotgun",90),e.AddSetting("RangeBan","Revolver",90),e.AddSetting("RangeBan","9mm Pistol",90),e.AddSetting("RangeBan","P250",130),e.AddSetting("RangeBan","Shotgun",40),e.AddSetting("RangeBan","Bolt Action Rifle",230),e.AddSetting("RangeBan","M4",150),e.AddSetting("RangeBan","MP5A4",90),e.AddSetting("RangeBan","Hunting Bow",100),e.Save()}Clean();var o=Plugin.GetIni("Settings"),a=o.GetSetting("AutoDetector","TrueFlase"),t=6e4*o.GetSetting("AutoDetector","Delay");"True"==a&&Plugin.CreateTimer("BanCheck",t).Start()}function CheckB(e,o){for(var a,t="",r=1;r<o.Length;r++)t+=o[r]+" ";if(t=Data.Substring(t,0,Data.StrLen(t)-1),a=Fougerite.Player.FindByName(t),null!=a)return a;var n=0;for(var s in Server.Players){var i=s.Name.ToLower(),m=o[1].ToLower();if(i.Contains(m)){var l=s.Name;n++}}return 1==n?a=Fougerite.Player.FindByName(l):n>1?(e.MessageFrom("BAN-System","Found [color#FF0000]"+n+" players[/color] with similar names. [color#FF0000]Use more correct name !"),0):0==n?(e.MessageFrom("BAN-System","Player [color#00FF00]"+t+"[/color] not found"),0):void 0}function CheckV(e,o){for(var a,t="",r=0;r<o.Length;r++)t+=o[r]+" ";if(t=Data.Substring(t,0,Data.StrLen(t)-1),a=Fougerite.Player.FindByName(t),null!=a)return a;var n=0;for(var s in Server.Players){var i=s.Name.ToLower(),m=o[0].ToLower();if(i.Contains(m)){var l=s.Name;n++}}return 1==n?a=Fougerite.Player.FindByName(l):n>1?(e.MessageFrom("BAN-System","Found [color#FF0000]"+n+" players[/color] with similar names. [color#FF0000]Use more correct name !"),0):0==n?(e.MessageFrom("BAN-System","Player [color#00FF00]"+t+"[/color] not found"),0):void 0}function On_PlayerDisconnected(e){var o=Plugin.GetIni("BanSystem"),a=Plugin.GetIni("BanSystemLog"),t=Plugin.GetIni("Settings"),r=3600*t.GetSetting("VoteBan","EscapeTime"),n=Data.GetTableValue("vban","target"),s=Data.GetTableValue("vban","targetIP"),i=60*System.DateTime.Now.ToString("HH")*60,m=60*System.DateTime.Now.ToString("mm"),l=System.DateTime.Now.ToString("ss"),c=parseInt(i)+parseInt(m)+parseInt(l),S=parseInt(c)+r,F=System.DateTime.Now.ToString("dd.MM"),d=System.DateTime.Now.ToString("HH:mm");if(Plugin.GetTimer("VBTimer")&&e.SteamID==n){Plugin.KillTimer("VBTimer"),Data.AddTableValue("vban","target",null),Data.AddTableValue("vban","yes",0),Data.AddTableValue("vban","no",0);for(var A in Server.Players)Data.AddTableValue("vban_voted",A.SteamID,null);System.Threading.Thread.Sleep(1e3),o.AddSetting("ID=Time",e.SteamID,S),o.AddSetting("IP=Time",s,S),o.Save(),a.AddSetting("Vote_Banned",e.SteamID,s+" |NAME: "+e.Name+" |DATE: "+F+" |TIME: "+d+" - ESCAPING VOTE"),a.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+e.Name+"[/color] has been [color#FF0000]BANNED[/color] for [color#FF0000]"+r/3600+" hour(s)[/color] - [color#00FF00]ESCAPING VOTE !"),System.Threading.Thread.Sleep(500),Data.AddTableValue("vban","targetIP",null)}}function VBTimerCallback(){var e=Plugin.GetIni("Settings"),o=e.GetSetting("VoteBan","BanTime"),a=CalcDays(o),t=System.DateTime.Now.ToString("dd.MM"),r=System.DateTime.Now.ToString("HH:mm"),n=Plugin.GetIni("BanSystem"),s=Plugin.GetIni("BanSystemLog"),i=Data.GetTableValue("vban","target"),m=null;for(var l in Server.Players)l.SteamID==i&&(m=l);TallyVotes()?null!=m&&(Plugin.KillTimer("VBTimer"),s.AddSetting("Vote_Banned",m.SteamID,m.IP+" |NAME: "+m.Name+" |DATE: "+t+" |TIME: "+r),s.Save(),n.AddSetting("ID=Time",m.SteamID,a),n.AddSetting("IP=Time",m.IP,a),n.Save(),Server.BroadcastFrom("BAN-System","[color#00FF00]"+m.Name+"[/color] has been [color#FF0000]BANNED[/color] - [color#00FF00]VOTE SUCCESSFUL !"),m.Disconnect()):Server.BroadcastFrom("BAN-System","[color#00FF00]Vote failed ![/color]"),Plugin.KillTimer("VBTimer"),Data.AddTableValue("vban","target",null),Data.AddTableValue("vban","targetIP",null),Data.AddTableValue("vban","yes",0),Data.AddTableValue("vban","no",0);for(var c in Server.Players)Data.AddTableValue("vban_voted",c.SteamID,null)}function TallyVotes(){var e=Plugin.GetIni("Settings"),o=e.GetSetting("VoteBan","PercentNeed"),a=Data.GetTableValue("vban","yes"),t=(Data.GetTableValue("vban","no"),Server.Players.Count);return a>t*o}function CalcDays(e){var o=System.DateTime.Now.ToString("M.dd"),a=parseFloat(o)+e/100;
if(2.01>a&&a>1.31)var t=a-1.31+2;else if(3.01>a&&a>2.28)var t=a-2.28+3;else if(4.01>a&&a>3.3)var t=a-3.3+4;else if(5.01>a&&a>4.3)var t=a-4.3+5;else if(6.01>a&&a>5.31)var t=a-5.31+6;else if(7.01>a&&a>6.3)var t=a-6.3+7;else if(8.01>a&&a>7.31)var t=a-7.31+8;else if(9.01>a&&a>8.31)var t=a-8.31+9;else if(10.01>a&&a>9.3)var t=a-9.3+10;else if(11.01>a&&a>10.31)var t=a-10.31+11;else if(12.01>a&&a>11.3)var t=a-11.3+12;else if(a>12.31)var t=a-12.31+1;else var t=a;return t}function CalcDaysP(e){if(2.01>e&&e>1.31)var o=e-1.31+2;else if(3.01>e&&e>2.28)var o=e-2.28+3;else if(4.01>e&&e>3.3)var o=e-3.3+4;else if(5.01>e&&e>4.3)var o=e-4.3+5;else if(6.01>e&&e>5.31)var o=e-5.31+6;else if(7.01>e&&e>6.3)var o=e-6.3+7;else if(8.01>e&&e>7.31)var o=e-7.31+8;else if(9.01>e&&e>8.31)var o=e-8.31+9;else if(10.01>e&&e>9.3)var o=e-9.3+10;else if(11.01>e&&e>10.31)var o=e-10.31+11;else if(12.01>e&&e>11.3)var o=e-11.3+12;else if(e>12.31)var o=e-12.31+1;else var o=e;return o}function Clean(){var e=Plugin.GetIni("BanSystem"),o=60*System.DateTime.Now.ToString("HH")*60,a=60*System.DateTime.Now.ToString("mm"),t=System.DateTime.Now.ToString("ss"),r=parseInt(o)+parseInt(a)+parseInt(t),n=System.DateTime.Now.ToString("M.dd");for(var s in e.EnumSection("ID=Time")){var i=e.GetSetting("ID=Time",s);r>i&&i>12.31?(e.DeleteSetting("ID=Time",s),e.Save()):n>i&&12.31>=i&&(e.DeleteSetting("ID=Time",s),e.Save())}for(var m in e.EnumSection("IP=Time")){var l=e.GetSetting("IP=Time",m);r>l&&l>12.31?(e.DeleteSetting("IP=Time",m),e.Save()):n>l&&12.31>=l&&(e.DeleteSetting("IP=Time",m),e.Save())}}