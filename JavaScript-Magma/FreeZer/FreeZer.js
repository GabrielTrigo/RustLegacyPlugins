       // @@@ ---  Creator SPooCK --- @@@   //
      //   @@@ --- FreeZer --- @@@     	   //
     //   @@@ --- Version 1.0.1 --- @@@   //
    //  								 //
   // 		░░░░░███████ ]▄▄▄▄▄▄▄▄  	//
  //		▂▄▅█████████▅▄▃▂      	   //
 //		Il███████████████████].	  	  //
// 		 ◥⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙◤..  	 //

function On_Command(e,n,r){if("myfreeze"==n){var o=DataStore.Get("FreeZer",e.SteamID);if("yes"==o)e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]You are ❅ FreeZed ❅ [color#368BC1]PERMANENTLY[/color] until Admin UN-FreeZe you !");else if("yes"!=o&&null!=o){var t=60*System.DateTime.Now.ToString("HH")*60,i=60*System.DateTime.Now.ToString("mm"),a=System.DateTime.Now.ToString("ss"),m=parseInt(t)+parseInt(i)+parseInt(a),d=o-m,S=parseInt(d/3600),u=parseInt(d/60),s=u-60*S,p=d-60*u;e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]Your ❅ FreeZ Time ❅ : [color#368BC1]"+s+" min. "+p+" sec.")}else null==o&&e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]You are NOT ❅ FreeZed ❅ !")}if("freeze"==n&&e.Admin){var C=Plugin.GetIni("FreeZer"),l=1e3*C.GetSetting("Settings","FreeZe Check SEC");if(0==r.Length)e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]To FreeZe Player type [color#368BC1]/freeze NAME[/color] To UN-FreeZe him type the same again."),e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]To FreeZe Player for minutes type [color#368BC1]/freeze NAME MINUTES[/color]");else if(1==r.Length){var F=CheckP(e,r);for(var N in Server.Players)if(N==F){var o=DataStore.Get("FreeZer",F.SteamID);null==o?(DataStore.Add("FreeZer",F.SteamID,"yes"),F.SendCommand("input.bind Up 7 None"),F.SendCommand("input.bind Down 7 None"),F.SendCommand("input.bind Left 7 None"),F.SendCommand("input.bind Right 7 None"),F.SendCommand("input.bind Sprint 7 None"),F.SendCommand("input.bind Duck 7 None"),F.SendCommand("input.bind Jump 7 None"),F.SendCommand("input.bind Fire 7 None"),F.SendCommand("input.bind AtlFire 7 None"),F.Notice("☃","❅ ADMIN FreeZed You ❅ ✍ /myfreeze to check your FreeZe",10),Server.BroadcastFrom("❅ FreeZer ❅","[color#56A5EC][color#368BC1]"+F.Name+" ☃[/color] ❅ FreeZed ❅"),Plugin.GetTimer("FreeZer")||Plugin.CreateTimer("FreeZer",l).Start()):null!=o&&(DataStore.Remove("FreeZer",F.SteamID),F.SendCommand("input.bind Up W UpArrow"),F.SendCommand("input.bind Down S DownArrow"),F.SendCommand("input.bind Left A LeftArrow"),F.SendCommand("input.bind Right D RightArrow"),F.SendCommand("input.bind Sprint LeftShift RightShift"),F.SendCommand("input.bind Duck LeftControl RightControl"),F.SendCommand("input.bind Jump Space None"),F.SendCommand("input.bind Fire Mouse0 None"),F.SendCommand("input.bind AtlFire Mouse1 None"),F.Notice("☃","❅ ADMIN UN-FreeZed You ❅",5),Server.BroadcastFrom("❅ FreeZer ❅","[color#56A5EC][color#368BC1]"+F.Name+" ☃[/color] ❅ UN-FreeZed ❅"))}}else if(2==r.Length){var F=CheckP(e,r),c=r[1];for(var N in Server.Players)if(N==F)if(c.match(/[0-9]/g))if(c>=1){var t=60*System.DateTime.Now.ToString("HH")*60,i=60*System.DateTime.Now.ToString("mm"),a=System.DateTime.Now.ToString("ss"),m=parseInt(t)+parseInt(i)+parseInt(a),g=parseInt(m)+60*c;DataStore.Add("FreeZer",F.SteamID,g),F.SendCommand("input.bind Up 7 None"),F.SendCommand("input.bind Down 7 None"),F.SendCommand("input.bind Left 7 None"),F.SendCommand("input.bind Right 7 None"),F.SendCommand("input.bind Sprint 7 None"),F.SendCommand("input.bind Duck 7 None"),F.SendCommand("input.bind Jump 7 None"),F.SendCommand("input.bind Fire 7 None"),F.SendCommand("input.bind AtlFire 7 None"),F.Notice("☃","❅ ADMIN FreeZed You ❅ For "+c+" min. ✍ /myfreeze to check your FreeZe",10),Server.BroadcastFrom("❅ FreeZer ❅","[color#56A5EC][color#368BC1]"+F.Name+" ☃[/color] ❅ FreeZed ❅ For [color#368BC1]"+c+" min."),Plugin.GetTimer("FreeZer")||Plugin.CreateTimer("FreeZer",l).Start()}else e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]Can't set less than 1 min. !");else e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]Use only numbers for correct MINUTES !")}}}function FreeZerCallback(){for(var e in Server.Players){var n=DataStore.Get("FreeZer",e.SteamID),r=60*System.DateTime.Now.ToString("HH")*60,o=60*System.DateTime.Now.ToString("mm"),t=System.DateTime.Now.ToString("ss"),i=parseInt(r)+parseInt(o)+parseInt(t);i>n&&null!=n&&"yes"!=n&&(DataStore.Remove("FreeZer",e.SteamID),e.SendCommand("input.bind Up W UpArrow"),e.SendCommand("input.bind Down S DownArrow"),e.SendCommand("input.bind Left A LeftArrow"),e.SendCommand("input.bind Right D RightArrow"),e.SendCommand("input.bind Sprint LeftShift RightShift"),e.SendCommand("input.bind Duck LeftControl RightControl"),e.SendCommand("input.bind Jump Space None"),e.SendCommand("input.bind Fire Mouse0 None"),e.SendCommand("input.bind AtlFire Mouse1 None"),e.Notice("☃","❅ Your FreeZe Time have Expired. You are free to go ❅",10),e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]❅ Your FreeZe Time have [color#368BC1]Expired[/color] You are free to go ❅"))}for(var e in Server.Players){var n=DataStore.Get("FreeZer",e.SteamID);if(null!=n){var a=Plugin.GetIni("FreeZer"),m=1e3*a.GetSetting("Settings","FreeZe Check SEC");e.SendCommand("input.bind Up 7 None"),e.SendCommand("input.bind Down 7 None"),e.SendCommand("input.bind Left 7 None"),e.SendCommand("input.bind Right 7 None"),e.SendCommand("input.bind Sprint 7 None"),e.SendCommand("input.bind Duck 7 None"),e.SendCommand("input.bind Jump 7 None"),e.SendCommand("input.bind Fire 7 None"),e.SendCommand("input.bind AtlFire 7 None"),Plugin.CreateTimer("FreeZer",m).Start()}}}function CheckP(e,n){for(var r,o="",t=0;t<n.Length;t++)o+=n[t]+" ";if(o=Data.Substring(o,0,Data.StrLen(o)-1),r=Fougerite.Player.FindByName(o),null!=r)return r;var i=0;for(var a in Server.Players){var m=a.Name.ToLower(),d=n[0].ToLower();if(m.Contains(d)){var S=a.Name;i++}}return 1==i?r=Fougerite.Player.FindByName(S):i>1?(e.MessageFrom("❅ FreeZer ❅","Found [color#FF0000]"+i+" players[/color] with similar names. [color#FF0000]Use more correct name !"),0):0==i?(e.MessageFrom("❅ FreeZer ❅","Player [color#00FF00]"+o+"[/color] not found"),0):void 0}function On_PlayerSpawned(e){var n=DataStore.Get("FreeZer",e.SteamID),r=60*System.DateTime.Now.ToString("HH")*60,o=60*System.DateTime.Now.ToString("mm"),t=System.DateTime.Now.ToString("ss"),i=parseInt(r)+parseInt(o)+parseInt(t);if("yes"==n){var a=Plugin.GetIni("FreeZer"),m=1e3*a.GetSetting("Settings","FreeZe Check SEC");e.SendCommand("input.bind Up 7 None"),e.SendCommand("input.bind Down 7 None"),e.SendCommand("input.bind Left 7 None"),e.SendCommand("input.bind Right 7 None"),e.SendCommand("input.bind Sprint 7 None"),e.SendCommand("input.bind Duck 7 None"),e.SendCommand("input.bind Jump 7 None"),e.SendCommand("input.bind Fire 7 None"),e.SendCommand("input.bind AtlFire 7 None"),e.Notice("☃","❅ You are FreeZed PERMANENTLY ! Please ask an ADMIN to UN-FreeZe you ❅",10),e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]❅ You are FreeZed PERMANENTLY ! Please ask an [color#368BC1]ADMIN[/color] to UN-FreeZe you ❅"),Plugin.GetTimer("FreeZer")||Plugin.CreateTimer("FreeZer",m).Start()}else if(n>i&&"yes"!=n){var d=n-i,S=parseInt(d/3600),u=parseInt(d/60),s=u-60*S,p=d-60*u,a=Plugin.GetIni("FreeZer"),m=1e3*a.GetSetting("Settings","FreeZe Check SEC");e.SendCommand("input.bind Up 7 None"),e.SendCommand("input.bind Down 7 None"),e.SendCommand("input.bind Left 7 None"),e.SendCommand("input.bind Right 7 None"),e.SendCommand("input.bind Sprint 7 None"),e.SendCommand("input.bind Duck 7 None"),e.SendCommand("input.bind Jump 7 None"),e.SendCommand("input.bind Fire 7 None"),e.SendCommand("input.bind AtlFire 7 None"),e.Notice("☃","❅ You are still FreeZed ! Please ask an ADMIN to UN-FreeZe you ❅ Or Wait: "+s+" min. "+p+" sec.",10),e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]❅ You are still FreeZed ! Please ask an [color#368BC1]ADMIN[/color] to UN-FreeZe you ❅ Or Wait: [color#368BC1]"+s+" min. "+p+" sec."),Plugin.GetTimer("FreeZer")||Plugin.CreateTimer("FreeZer",m).Start()}else i>n&&null!=n&&"yes"!=n&&(DataStore.Remove("FreeZer",e.SteamID),e.SendCommand("input.bind Up W UpArrow"),e.SendCommand("input.bind Down S DownArrow"),e.SendCommand("input.bind Left A LeftArrow"),e.SendCommand("input.bind Right D RightArrow"),e.SendCommand("input.bind Sprint LeftShift RightShift"),e.SendCommand("input.bind Duck LeftControl RightControl"),e.SendCommand("input.bind Jump Space None"),e.SendCommand("input.bind Fire Mouse0 None"),e.SendCommand("input.bind AtlFire Mouse1 None"),e.Notice("☃","❅ Your FreeZe Time have Expired. You are free to go ❅",10),e.MessageFrom("❅ FreeZer ❅","[color#56A5EC]❅ Your FreeZe Time have [color#368BC1]Expired[/color] You are free to go ❅"))}function On_PluginInit(){if(!Plugin.IniExists("FreeZer")){var e=Plugin.CreateIni("FreeZer");e.AddSetting("Settings","FreeZe Check SEC",30),e.Save()}for(var n in Server.Players){var r=DataStore.Get("FreeZer",n.SteamID),o=60*System.DateTime.Now.ToString("HH")*60,t=60*System.DateTime.Now.ToString("mm"),i=System.DateTime.Now.ToString("ss"),a=parseInt(o)+parseInt(t)+parseInt(i);a>r&&null!=r&&"yes"!=r&&Plugin.CreateTimer("FreeZer",62e3).Start()}}